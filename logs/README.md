# Logs Directory

This directory contains logs generated by various components of the Spotify data pipeline.

## Purpose

The logs directory serves as a centralized location for collecting and organizing logs, making it easier to monitor, debug, and audit the pipeline's operation.

## Log Categories

Logs are organized into subdirectories by component:

### Pipeline Logs
- `beam/` - Apache Beam pipeline execution logs
- `scio/` - Scala/Scio pipeline execution logs
- `kafka/` - Kafka producer and consumer logs
- `batch/` - Batch processing job logs

### Infrastructure Logs
- `docker/` - Container logs
- `airflow/` - Airflow scheduler and worker logs
- `postgres/` - Database logs

### Application Logs
- `api/` - API service logs
- `ui/` - User interface logs
- `etl/` - ETL process logs

## Log Format

Most logs follow a structured JSON format with the following fields:

```json
{
  "timestamp": "2023-03-18T21:34:12.345Z",
  "level": "INFO",
  "logger": "com.spotify.pipeline.StreamingHistoryTransform",
  "message": "Processing complete",
  "context": {
    "pipeline": "streaming_history",
    "records_processed": 15243,
    "duration_ms": 45321
  },
  "thread": "main",
  "correlation_id": "abc-123-def-456"
}
```

## Log Rotation

Logs are automatically rotated based on the following policy:

- Size-based rotation: 100MB per file
- Time-based rotation: Daily
- Retention period: 30 days for normal logs, 90 days for error logs

## Log Level Guidelines

- **ERROR**: System errors requiring immediate attention
- **WARNING**: Potential issues that don't stop execution
- **INFO**: Normal operational information
- **DEBUG**: Detailed information for troubleshooting (development only)
- **TRACE**: Very detailed debugging information (development only)

## Accessing Logs

### Local Development

Logs can be accessed directly from this directory.

### Production

In production environments, logs are:
1. Collected in this directory
2. Shipped to an ELK (Elasticsearch, Logstash, Kibana) stack
3. Available through the Kibana dashboard

## Important Notes

- Do not store sensitive information in logs
- Production logs should never be at DEBUG or TRACE level
- Critical errors should trigger alerts via the monitoring system
- Use correlation IDs to track requests across multiple services
- Use structured logging to make logs more searchable 